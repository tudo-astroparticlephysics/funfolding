language: python
python:
  - '3.5'
  - '3.6'
  - '2.7'

before_install:
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
  - sudo rm -rf /dev/shm
  - sudo ln -s /run/shm /dev/shm
  - pip install --upgrade pip

install:
  - pip install flake8
  - pip install .

script:
  - flake8 funfolding
  - python setup.py test

deploy:
- provider: pypi
  skip_cleanup: true
  distributions: sdist
  server: https://pypi.python.org/pypi
  user: tudo-app
  password: 
    secure: XYRjIvdT7/xiw+eG7x31dt90JgkwaiYbhM3u3hsSW+Ol4WjiwahHiIre8xYalrcPupUN+k5p5E6SKRjc+cXHqdcPGElxERpb/axlY0Q+8x6YRWhO7Ts7ODN9H9rAt8blyvRS/oknkxr64GzHt6U1S8//Iwh66YNA5xVrzvbnLKMZQVVDnQQPFAMhD23CRU1oKYSOxFZCN+r+boYXqbhjGKr9rzABcMbmyDMmiEpfM8W+tKPAwsQ8AaxaVrIFZNXXtQx748FXOvPAg2cwjF83X+OMvXUVb+EzdIpRN+v27JWFPao0eqDJ/OsuYvfHRi0h3uUNMq6Q9PfGqDaRX8bkofWldFXNuoi9FmcwI5fc0sFXLWCNOt5vKn+qQ5de8zi16/iXReG+NCS4KcP7319+WPbasAXgXXMjVBIUxqT6ONtKyQrCrhBLJ72mTWMtmAAWVw5YYU2e2gca42uVbQ17kmrl20bvRoeydsBGNcAXMMJNkTSeSpkGhdM6LMhjSx0epkueR9krhNo3+JlXr7QCuaSMvRgV156kuvdu+WFFQJod8R4qJqArONkVjb6+ltcyQyimgh7GzJoZDNIRl5eLyUp2C8qKjIMXm+QFU+usBjXomYoXB9dHlHchJBXAChcrcvhfSZBMSZ2cynlk6Ds4DYiZIxgdfO0OI622iCyMymc=
  on:
    branch: master
    tags: true
    condition: $TRAVIS_PYTHON_VERSION = "3.6"
