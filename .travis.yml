language: python
python:
  - '3.5'
  - '3.6'
  - '2.7'

before_install:
  - export DISPLAY=:99.0
  - sh -e /etc/init.d/xvfb start
  - sudo rm -rf /dev/shm
  - sudo ln -s /run/shm /dev/shm
  - pip install --upgrade pip

install:
  - pip install flake8
  - pip install https://github.com/dfm/emcee/archive/master.tar.gz
  - pip install .

script:
  - flake8 funfolding
  - python setup.py test

deploy:
  provider: pypi
  user: tudo-app
  password:
    secure: "V3wJfPviiGLr3uxFwWOcq3corYHtQgaIe9XEOyVb6N+TR9pXsad/hz3uWMDPAnaMoSJMcXPMyEAfZKeJRQTAJ6fIEqW3Bo1RTeo56uQr//yY42KgNlIIEfykCR7gRdbahGnUAW2CLlhMBI9k+LTlI38TCdaH3FhUWBq++a4UZI/o0yS7wHlhxRtHMMRI74hzGHUsI1mK+CD+hAWtF6cpugs5JIDJ3wdIZuv9jcchHib18sTas+4LlvPlCC+C9SAfbrzY5cPg+uxHGPP2eOxiqWgP96U8YsTAbdIbW4TnpTwAXyX3xkfzTce00eaX1fgtlh1AhFdcJM3cmbeKGA+hURrJjXB656YNpKvsLsF87iSkWICNbioHLA9la35r5ozHiWOqrh77HoyiolcHKGvIlWAOBGCsBtjQgAjeG+0DMF+S1rOLTfjFuhooWGzMbo4TDHE7v8tzoZLYZ9IwierPVsA+r4RKkisTTF0nhbN6TZ8EPm9MaVmCs5UOSA2ieE40joqJ5NJTLWHVhc+qwC5NRgbOTLcCiRwL3OdYg3rwEk41377EYRrXlLAnja2qPCcv9H1+Qn9mQxINE4XOi9xChtsKYLHVckJ8kwVHk9DoftodIXy4MZJjSdx3aTgkZ3UERKlGCxtaQZBW0pz4aevvAua5XLAQzLctdSsYfCSZSNE="
  skip_cleanup: true
  distributions: sdist
  on:
    branch: master
    tags: true
    condition: $TRAVIS_PYTHON_VERSION = "3.6"
